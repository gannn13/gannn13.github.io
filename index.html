<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mini-Riset: Analisis Efisiensi Charger â€” dSoC/dt</title>

  <link rel="stylesheet" href="assets/css/styles.css" />

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="app">
    <header class="header">
      <div class="brand">
        <h1>Analisis Efisiensi Charger (dSoC/dt)</h1>
        <p class="muted">Masukkan data merk charger & HP, lalu lihat proses turunan dan grafiknya.</p>
      </div>
    </header>

    <main class="main container">
      <section class="panel">
        <h2>Input Data Percobaan</h2>
        <form id="experimentForm" class="form">
          <div class="row">
            <label>Nama percobaan</label>
            <input id="expName" placeholder="Contoh: Charger ABC + HP X" required />
          </div>

          <div class="row">
            <label>Merk Charger</label>
            <input id="chargerBrand" placeholder="Contoh: Anker, Xiaomi" required />
          </div>

          <div class="row">
            <label>Merk & Model HP</label>
            <input id="phoneBrand" placeholder="Contoh: Samsung A12" required />
          </div>

          <div class="row">
            <label>Deskripsi singkat (opsional)</label>
            <input id="desc" placeholder="Kondisi: HP mati, screen-off, dsb." />
          </div>

          <div class="row">
            <label>Data waktu & SoC (format CSV)</label>
            <textarea id="csvData" placeholder="Format tiap baris: time_seconds,SoC_percent
Contoh:
0,20
60,22
120,25
180,29
240,33" rows="6" required></textarea>
            <small class="muted">Waktu dalam detik (s), SoC dalam persen (0-100). Minimal 3 titik data.</small>
          </div>

          <div class="row actions">
            <button type="submit" class="btn primary">Proses Data & Hitung Turunan</button>
            <button type="button" id="loadExample" class="btn">Muat Contoh</button>
          </div>
        </form>
      </section>

      <section class="panel results">
        <h2>Hasil Perhitungan</h2>
        <div id="summary" class="summary">
          <p class="muted">Belum ada data. Proses data untuk melihat hasil.</p>
        </div>

        <div class="charts">
          <canvas id="socChart" aria-label="Grafik SoC terhadap Waktu"></canvas>
          <canvas id="derivChart" aria-label="Grafik dSoC/dt terhadap Waktu"></canvas>
        </div>

        <div class="table-actions">
          <button id="exportCsv" class="btn">Export Semua Hasil (CSV)</button>
          <input type="file" id="importCsvFile" accept=".csv" />
          <button id="clearAll" class="btn warn">Hapus Semua Simpanan</button>
        </div>

        <h3>Daftar Hasil Tersimpan</h3>
        <div class="table-wrap">
          <table id="resultsTable">
            <thead>
              <tr>
                <th>#</th>
                <th>Nama</th>
                <th>Charger</th>
                <th>HP</th>
                <th>Waktu sampel</th>
                <th>Avg dSoC/dt (%/s)</th>
                <th>Aksi</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div class="note">
          <p class="muted">Bagikan hasil satu percobaan: klik ikon ðŸ”— di kolom Aksi untuk membuat link yang dapat dibuka orang lain (URL terenkode di hash). Mereka yang membuka link akan melihat hasil tersebut.</p>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="container">
        <small>Disiapkan untuk tugas mini-riset kalkulus diferensial â€” dSoC/dt Â· (Static site â€” siap di GitHub Pages)</small>
      </div>
    </footer>
  </div>

  <script src="assets/js/app.js" defer></script>
</body>
</html>
